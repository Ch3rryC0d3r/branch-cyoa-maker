<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Branch - Leaves Documentation</title>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #fdfdfd; color: #333; line-height: 1.6; margin: 0; padding: 0; }
  header { background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; padding: 2rem; text-align: center; }
  header h1 { margin: 0; font-size: 2.5rem; }
  main { max-width: 1000px; margin: 2rem auto; padding: 1rem 2rem; background: #fff; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); }
  h2 { border-bottom: 3px solid #2575fc; padding-bottom: 0.5rem; margin-top: 2rem; color: #222; }
  h3 { margin-top: 1.5rem; color: #444; }
  p { margin: 1rem 0; }
  code, pre { background: #f4f4f4; padding: 0.2rem 0.4rem; border-radius: 5px; font-family: Consolas, monospace; }
  pre { display: block; padding: 1rem; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word; }
  ul { margin: 1rem 0 1rem 1.5rem; }
  .example { background: #f0f8ff; border-left: 5px solid #2575fc; padding: 1rem; margin: 1rem 0; border-radius: 6px; }
</style>
</head>
<body>
<header>
  <h1>ðŸŒ¿ Branch - Leaves Documentation</h1>
  <p>Learn everything about Leaves in Branch projects, from basics to advanced tricks.</p>
</header>
<main>

<h2>What is a Leaf?</h2>
<p>A <strong>Leaf</strong> is a single option line inside a Node. It's what players can pick. Each Leaf can:</p>
<ul>
  <li>Show <strong>Text</strong> for the choice.</li>
  <li>Point to another Node (<strong>Next</strong>).</li>
  <li>Check <strong>Conditions</strong> for display.</li>
  <li>Execute <strong>Actions</strong> when chosen.</li>
</ul>

<h2>Leaf Structure</h2>
<p>Leaves are written as:</p>
<pre><code>Text | Next | Condition | Actions</code></pre>

<ul>
  <li><strong>Text</strong> â†’ What player sees (supports <code>{var}</code> substitution).</li>
  <li><strong>Next</strong> â†’ Node to go to (single, random, or variable).</li>
  <li><strong>Condition</strong> â†’ Optional checks for visibility.</li>
  <li><strong>Actions</strong> â†’ Things that happen when chosen.</li>
</ul>

<div class="example">
  <p><strong>Simple Example:</strong></p>
  <pre><code>Take the sword | 5 | has_item:Key | add_item:Sword</code></pre>
</div>

<h2>Conditions</h2>
<p>Conditions control visibility. Chain them with <code>&</code> or <code>;</code>.</p>
<ul>
  <li><code>has_item:Sword</code> â†’ Requires item.</li>
  <li><code>not_has_item:Key</code> â†’ Requires absence of item.</li>
  <li><code>HP &lt;= 0</code> â†’ Numeric/boolean checks.</li>
  <li><code>var:CLICKS==1</code> â†’ Explicit variable check.</li>
</ul>

<h2>Actions</h2>
<p>Actions execute when a Leaf is chosen. Chain with <code>&</code> or <code>;</code>.</p>

<h3>Variables</h3>
<ul>
  <li><code>gold = 100</code> â†’ Assign value.</li>
  <li><code>gold += 5</code> â†’ Modify (also <code>-=</code>, <code>*=</code>, <code>/=</code>).</li>
</ul>

<h3>Inventory</h3>
<ul>
  <li><code>add_item:Sword</code> â†’ Add item.</li>
  <li><code>remove_item:Key</code> â†’ Remove item.</li>
  <li><code>clearinv</code> â†’ Wipe entire inventory.</li>
</ul>

<h3>Flow Control</h3>
<ul>
  <li><code>goto:10</code> â†’ Jump to node.</li>
  <li><code>once:add_item:Map</code> â†’ Run action only the first time (never again).</li>
</ul>

<h3>Randomization</h3>
<ul>
  <li><code>randr(damage:5,20)</code> â†’ Random float in range.</li>
  <li><code>rands(weather:Sunny,Cloudy)</code> â†’ Random from list.</li>
  <li><code>weighted(weather, Sunny=70, Rain=30)</code> â†’ Weighted random choice.</li>
  <li><code>change(30)&gt;gold+=10&gt;gold-=5</code> â†’ 30% chance â†’ success action, else â†’ fail action.</li>
</ul>

<h3>Loops</h3>
<ul>
  <li><code>repeat:3&gt;gold+=1</code> â†’ Repeat action N times.</li>
</ul>

<h3>Sound (requires <code>pygame</code>)</h3>
<ul>
  <li><code>play:coin.wav</code> â†’ Play once, non-blocking.</li>
</ul>

<h3>Instant Actions (@)</h3>
<p>Run on node entry, before choice.</p>
<pre><code>@HP-=5
@add_item:Key</code></pre>

<h3>Conditional Actions</h3>
<pre><code>if(HP&lt;=0)&gt;goto:GameOver
if(has_item:Sword)&gt;gold+=50</code></pre>

<div class="example">
  <p><strong>Complex Example:</strong></p>
  <pre><code>Fight the dragon | 20 | var:LEVEL&gt;=5 &amp; has_item:Sword | 
@HP-=20; randr(Damage:5,15); weighted(Loot, Gold=70, Gem=20, Nothing=10); 
once:add_item:Trophy; play:roar.wav; change(30)&gt;goto:Victory&gt;goto:Defeat</code></pre>
</div>

<h2>Summary</h2>
<p>Leaves are the heart of Branch stories. Use text, conditions, actions, instant triggers, sound, randomization, and flow control to craft dynamic CYOA adventures.</p>

</main>
</body>
<p>Last update: Branch v0.5.02.10</p>
</html>
